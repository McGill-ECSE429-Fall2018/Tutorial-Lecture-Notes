<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="McGill University">
<title>ECSE 429 Software Validation (Fall 2018): Hands-on Tutorials</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>ECSE 429 Software Validation (Fall 2018): Hands-on Tutorials</h1>
<div class="details">
<span id="author" class="author">McGill University</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_git_recap">1. Git Recap</a>
<ul class="sectlevel2">
<li><a href="#_git_and_github">1.1. Git and GitHub</a>
<ul class="sectlevel3">
<li><a href="#_installing_git">1.1.1. Installing Git</a></li>
<li><a href="#_logging_in_to_github">1.1.2. Logging in to GitHub</a></li>
<li><a href="#_creating_a_repository_on_github">1.1.3. Creating a repository on GitHub</a></li>
<li><a href="#_cloning_to_a_local_repository">1.1.4. Cloning to a local repository</a></li>
<li><a href="#_git_basics">1.1.5. Git basics</a></li>
<li><a href="#_browsing_commit_history_on_github">1.1.6. Browsing commit history on GitHub</a></li>
<li><a href="#_linux_commands_cheat_sheet">1.1.7. Linux commands cheat sheet:</a></li>
</ul>
</li>
<li><a href="#_travis_ci">1.2. Travis CI</a></li>
</ul>
</li>
<li><a href="#_code_reviews">2. Code Reviews</a>
<ul class="sectlevel2">
<li><a href="#_github_code_reviews">2.1. GitHub Code Reviews</a></li>
<li><a href="#_gerrit_code_reviews">2.2. Gerrit Code Reviews</a>
<ul class="sectlevel3">
<li><a href="#_making_a_change_with_gerrit">2.2.1. Making a Change with Gerrit</a></li>
<li><a href="#_review_and_manage_a_change_with_gerrit">2.2.2. Review and Manage a Change with Gerrit</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_unit_testing_frameworks">3. Unit Testing Frameworks</a></li>
<li><a href="#_static_analysis">4. Static Analysis</a>
<ul class="sectlevel2">
<li><a href="#_prerequisites">4.1. Prerequisites</a></li>
<li><a href="#_sonarqube_static_code_analysis">4.2. SonarQube Static Code Analysis</a>
<ul class="sectlevel3">
<li><a href="#_offline_sonarqube_installation">4.2.1. Offline SonarQube Installation</a></li>
<li><a href="#_sonarqube_integrated_with_travis">4.2.2. SonarQube Integrated With Travis</a></li>
</ul>
</li>
<li><a href="#_sonarcloud_integration_for_project_deliverable">4.3. SonarCloud integration for Project deliverable</a></li>
<li><a href="#_infer_static_analyzer">4.4. Infer Static Analyzer</a></li>
</ul>
</li>
<li><a href="#_test_generation_and_code_coverage">5. Test Generation and Code Coverage</a>
<ul class="sectlevel2">
<li><a href="#_evosuite_installation_and_initial_project_setup">5.1. EvoSuite Installation and Initial Project Setup</a></li>
<li><a href="#_generating_tests_using_evosuite">5.2. Generating Tests using EvoSuite</a></li>
<li><a href="#_adding_the_generated_tests_to_the_build">5.3. Adding the Generated Tests to the Build</a></li>
<li><a href="#_measuring_code_coverage_with_android_studio">5.4. Measuring Code Coverage with Android Studio</a></li>
<li><a href="#_cleaning_up_the_project">5.5. Cleaning Up the Project</a></li>
</ul>
</li>
<li><a href="#_mutation_testing">6. Mutation Testing</a>
<ul class="sectlevel2">
<li><a href="#_mutation_testing_using_pit">6.1. Mutation Testing Using PIT</a></li>
<li><a href="#_using_gradle_with_pit_testing">6.2. Using Gradle with PIT testing</a></li>
<li><a href="#_configuring_pit_testing">6.3. Configuring PIT testing</a></li>
<li><a href="#_using_pit_in_eclipse">6.4. Using PIT in Eclipse</a></li>
</ul>
</li>
<li><a href="#_integration_testing">7. Integration Testing</a>
<ul class="sectlevel2">
<li><a href="#_testing_using_mocks">7.1. Testing Using Mocks</a></li>
<li><a href="#_local_ui_tests">7.2. Local UI Tests</a></li>
<li><a href="#_android_instrumentation_tests">7.3. Android Instrumentation Tests</a>
<ul class="sectlevel3">
<li><a href="#_project_dependencies_and_setup">7.3.1. Project dependencies and setup</a></li>
<li><a href="#_creating_an_instrumentation_test">7.3.2. Creating an instrumentation test</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_android_user_interface_tests">8. Android User Interface Tests</a>
<ul class="sectlevel3">
<li><a href="#_running_android_emulator_on_travis_ci">8.1. Running Android Emulator on Travis-CI</a></li>
</ul>
</li>
<li><a href="#_acceptance_testing">9. Acceptance Testing</a></li>
<li><a href="#_model_based_testing">10. Model-based Testing</a>
<ul class="sectlevel2">
<li><a href="#_graphwalker">10.1. GraphWalker</a></li>
<li><a href="#_setting_up_graphwalker">10.2. Setting up GraphWalker</a></li>
<li><a href="#_creating_a_test_model">10.3. Creating a test model</a></li>
<li><a href="#_test_generation">10.4. Test generation</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Developed by Daniel Varro, Mathieu Boucher, and Marton Bur.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://mcgill-ecse429-fall2018.github.io/Tutorial-Lecture-Notes/">HTML version</a></p>
</li>
<li>
<p><a href="https://mcgill-ecse429-fall2018.github.io/Tutorial-Lecture-Notes/ECSE-429-Tutorials.pdf">PDF version</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sections of the tutorial will continuously be published at this web page.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git_recap">1. Git Recap</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_git_and_github">1.1. Git and GitHub</h3>
<div class="sect3">
<h4 id="_installing_git">1.1.1. Installing Git</h4>
<div class="paragraph">
<p>Install the Git version control system (VCS) from <a href="https://git-scm.com/downloads" class="bare">https://git-scm.com/downloads</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_logging_in_to_github">1.1.2. Logging in to GitHub</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an account on <a href="https://github.com/" class="bare">https://github.com/</a>.</p>
</li>
<li>
<p>Verify your e-mail, then log in using your credentials.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_repository_on_github">1.1.3. Creating a repository on GitHub</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Visit <a href="https://github.com/" class="bare">https://github.com/</a> then click on <em>New repository</em> (green buttom on the right).</p>
</li>
<li>
<p>Set your user as the owner of the repository.</p>
</li>
<li>
<p>Give a name for the repository (e.g., ecse429-tutorial-1), leave it <em>public</em>, then check <em>Initialize this repository with a README</em>. Click on <em>Create repository</em> afterwards. At this point the remote repository is ready to use.<br>
<span class="image"><img src="./figs/create-repo.png" alt="Creating a repository on GitHub"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_cloning_to_a_local_repository">1.1.4. Cloning to a local repository</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up a terminal (Git bash on Windows).</p>
</li>
<li>
<p>Navigate to the designated target directory (it is typical to use the <code>git</code> folder within the home directory for storing Git repositories, e.g., <code>cd /home/username/git</code>).</p>
</li>
<li>
<p>Using a Git client, clone this repository to your local Git repository. First, get the repository URL (use HTTPS for now).<br>
<span class="image"><img src="./figs/git-repourl.png" alt="Repository URL"></span><br>
Then, issue <code>git clone https://url/of/the/repository.git</code><br>
You should get an output similar to this:<br>
<span class="image"><img src="./figs/git-clone-result.png" alt="Cloning a repository"></span></p>
</li>
<li>
<p>Verify the contents of the <em>working copy</em> of the repository by <code>ls -la ./repo-name</code>. The <em>.git</em> folder holds version information and history for the repository.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_git_basics">1.1.5. Git basics</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open up a terminal and configure username and email address. These are needed to identify the author of the different changes.<br>
<span class="image"><img src="./figs/gitconfig-username.png" alt="Configuring username"></span>
<span class="image"><img src="./figs/gitconfig-email.png" alt="Configuring email"></span><br>
Glossary&#8201;&#8212;&#8201;Part 1:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Git</strong> is your version control software</p>
</li>
<li>
<p><strong>GitHub</strong> hosts your repositories</p>
</li>
<li>
<p>A <strong>repository</strong> is a collection of files and their history</p>
</li>
<li>
<p>A <strong>commit</strong> is a saved state of the repository</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enter the working directory, then check the history by issuing <code>git log</code>. Example output:<br>
<span class="image"><img src="./figs/git-log-result.png" alt="Example output for git log"></span></p>
</li>
<li>
<p>Adding and commiting a file: use the <code>git add</code> and <code>git commit</code> commands.<br>
<span class="image"><img src="./figs/git-commit1.png" alt="git commit1"></span>
<span class="image"><img src="./figs/git-commit2.png" alt="git commit2"></span>
<span class="image"><img src="./figs/git-commit3.png" alt="git commit3"></span><br>
The effect of these commands are explained on the figure below:<br>
<span class="image"><img src="./figs/git-commit-explained.png" alt="git commit explained"></span><br>
Glossary&#8201;&#8212;&#8201;Part 2:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Working Directory</strong>: files being worked on right now</p>
</li>
<li>
<p><strong>Staging area</strong>: files ready to be committed</p>
</li>
<li>
<p><strong>Repository</strong>: A collection of commits</p>
</li>
</ul>
</div>
</li>
<li>
<p>Checking current status is done with <code>git status</code>.<br>
<span class="image"><img src="./figs/git-status.png" alt="git status"></span></p>
</li>
<li>
<p>Staging and unstaging files: use <code>git reset</code> to remove files from the staging area.<br>
<span class="image"><img src="./figs/git-add.png" alt="git add"></span>
<span class="image"><img src="./figs/git-status-add.png" alt="git status add"></span>
<span class="image"><img src="./figs/git-reset.png" alt="git reset"></span><br>
<strong>Important:</strong> only staged files will be commited.<br>
<span class="image"><img src="./figs/git-commit-staged.png" alt="git commit staged"></span></p>
</li>
<li>
<p>To display detailed changes in unstaged files use <code>git diff</code>, while use <code>git diff --staged</code> to show changes within files staged for commit.<br>
<span class="image"><img src="./figs/git-diff.png" alt="git diff"></span></p>
</li>
<li>
<p>Reverting to a previous version is done using <code>git checkout</code>.<br>
<span class="image"><img src="./figs/git-checkout.png" alt="git checkout"></span></p>
</li>
<li>
<p>The commands <code>git pull</code> (or the <code>git fetch</code> + <code>git rebase</code> combination) and <code>git push</code> are used to synchronize local and remote repositories.<br>
<span class="image"><img src="./figs/git-remote.png" alt="git remote"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_browsing_commit_history_on_github">1.1.6. Browsing commit history on GitHub</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You can browse pushed commits in the remote repository online using GitHub. You can select the <em>commits</em> menu for a repository.<br>
<span class="image"><img src="./figs/commits-menu.png" alt="commits menu"></span><br>
To get a link for a specific commit, click on the button with the first few characters of the hash of the commit.<br>
<span class="image"><img src="./figs/commits-select.png" alt="commits select"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_linux_commands_cheat_sheet">1.1.7. Linux commands cheat sheet:</h4>
<div class="ulist">
<ul>
<li>
<p><code>cd</code>: change/navigate directory</p>
</li>
<li>
<p><code>ls</code>: list contents of a directory</p>
</li>
<li>
<p><code>ls -la</code>: list all contents of a directory in long listing format</p>
</li>
<li>
<p><code>touch</code>: create a file</p>
</li>
<li>
<p><code>cp</code>: copy a file</p>
</li>
<li>
<p><code>mv</code>: move a file</p>
</li>
<li>
<p><code>rm</code>: remove a file</p>
</li>
<li>
<p><code>mkdir</code>: create a directory</p>
</li>
<li>
<p><code>cp -r</code>: copy a directory recursively with its contents</p>
</li>
<li>
<p><code>rmdir</code>: remove a directory</p>
</li>
<li>
<p><code>rm -rf</code>: force to recursively delete a directory (or file) and all its contents</p>
</li>
<li>
<p><code>cat</code>: concatenate and print contents of files</p>
</li>
<li>
<p><code>nano</code>: an easy-to-use text editor</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The source for most of the images in the Git documentation: <a href="https://github.com/shabbir-hussain/ecse321tutorials/blob/master/01-githubTutorial1.pptx" class="bare">https://github.com/shabbir-hussain/ecse321tutorials/blob/master/01-githubTutorial1.pptx</a></p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_travis_ci">1.2. Travis CI</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="https://travis-ci.com/" class="bare">https://travis-ci.com/</a>, click on Sign up with GitHub.</p>
</li>
<li>
<p>Click on the green authorize button at the bottom of the page.</p>
</li>
<li>
<p>Activate Travis-CI on your GitHub account<br></p>
</li>
<li>
<p>Select the repositories you want to build with Travis (make sure to include your repository that you created for this tutorial). You can modify this setting anytime later as well.</p>
</li>
<li>
<p>In your working copy of your repository, create a small Maven project with Spring Boot.</p>
<div class="ulist">
<ul>
<li>
<p>Make sure you have Maven 3 installed (<code>mvn --version</code>).</p>
</li>
<li>
<p>Create the <code>src/main/java/Main.java</code> file with the content</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.SpringApplication;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.RequestMapping;

@Configuration
@EnableAutoConfiguration
@RestController
public class Main {
  public static void main(String[] args) {
    SpringApplication.run(Main.class, args);
  }

  @RequestMapping("/")
  public String greeting(){
    return "Hello world!";
  }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Create a <code>pom.xml</code> in the root of the working copy.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://maven.apache.org/POM/4.0.0"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;ca.mcgill.ecse429&lt;/groupId&gt;
  &lt;artifactId&gt;tutorial1&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;

  &lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;
    &lt;relativePath/&gt;
  &lt;/parent&gt;

  &lt;name&gt;tutorial1&lt;/name&gt;

  &lt;properties&gt;
    &lt;java.version&gt;1.8&lt;/java.version&gt;
  &lt;/properties&gt;

  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;goals&gt;
              &lt;goal&gt;build-info&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;additionalProperties&gt;
                &lt;java.source&gt;${maven.compiler.source}&lt;/java.source&gt;
                &lt;java.target&gt;${maven.compiler.target}&lt;/java.target&gt;
              &lt;/additionalProperties&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Add a <code>.gitignore</code> to ignore generated resources by Git:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>*.class
target/</code></pre>
</div>
</div>
</li>
<li>
<p>Make sure your application is compiling by running <code>mvn clean install</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a file called <code>.travis.yml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>language: java
script:
- mvn clean install</code></pre>
</div>
</div>
</li>
<li>
<p>Commit and push your work. If everything is set up correctly, the build should trigger and Travis should run your build using Maven.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_code_reviews">2. Code Reviews</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_github_code_reviews">2.1. GitHub Code Reviews</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the folder for the working copy of your <em>ecse429-tutorial1</em> from the previous tutorial.</p>
</li>
<li>
<p>Create &amp; checkout a new branch named called <code>documentation</code>. (<code>git branch documentation &amp;&amp; git checkout documentation</code> )</p>
</li>
<li>
<p>Edit <code>README.md</code>.<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code># ecse429-tutorial1

A default java project generated by Maven.</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Commit your changes and push this <code>documentation</code> branch. (<code>git add . &amp;&amp; git commit -m "Adding brief project description" &amp;&amp; git push</code>)</p>
</li>
<li>
<p>Open the main page for the repository on Github. Click on the green button in the upper right corner to open a <em>pull request</em>.<br>
<span class="image"><img src="./figs/github-pr-open.png" alt="Open pull request"></span></p>
</li>
<li>
<p>Study the possible settings, then create the pull request.<br>
<span class="image"><img src="./figs/pr-create.png" alt="Open pull request page"></span></p>
</li>
<li>
<p>On the next page, click on <em>Files changed</em>. Place a comment in the updated file and start a review.<br>
<span class="image"><img src="./figs/github-review.png" alt="Review on GitHub"></span></p>
</li>
<li>
<p>Normally, the owner and the reviewer are two different participants, and GitHub offers more options when completing a review: <em>approve changes</em> or <em>request changes</em>. This time simply click on <em>Finish review</em> and <em>Comment</em>.</p>
</li>
<li>
<p>Merge the pull request. Delete the branch afterwards.<br>
<span class="image"><img src="./figs/github-merge.png" alt="Merge pull request"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_gerrit_code_reviews">2.2. Gerrit Code Reviews</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="http://gerrithub.io/" class="bare">http://gerrithub.io/</a>, click on <em>First time Sign In</em>.</p>
</li>
<li>
<p>Authenticate with GitHub, then select the repositories you want to replicate with Gerrit. It is best to select the the public <em><a href="#your GitHub user">[your GitHub user]</a>/ecse429-tutorial1</em> repository created previously to follow the steps of this tutorial.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can select repositories to replicate anytime by navigating to <em>gerrithub.io &gt; Open Gerrit Code Review &gt; GitHub (in the top menubar) &gt; Repositories</em>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a GerritHub password for HTTP access. Go to <em>your profile (upper right corner) &gt; Settings &gt; HTTP Password</em>, then click on <em>Generate password</em>. Make sure to save it somewhere, otherwise you need to generate it again next time.</p>
</li>
<li>
<p>Click on <em>Projects &gt; List</em>, then search for your repository.<br>
<span class="image"><img src="./figs/gerrit-projects.png" alt="Gerrit projects menu"></span></p>
</li>
<li>
<p>Select your project named after your repository, then set the settings below and click on <em>Save Changes</em>.<br>
<span class="image"><img src="./figs/gerrit-project-settings.png" alt="Gerrit project settings"></span></p>
</li>
<li>
<p>Copy the command from the <code>git clone</code> command shown above the <em>Description</em> text box after changing to <em>Clone with commit-msg hook</em> and <em>http</em>.<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Make sure you are issuing the <code>git clone</code> command in a folder that <em>is not part of any git repository working copy</em> in your file system. (In other words, you should do it in your <code>~/git</code> folder or the like.)
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/gerrit-clone.png" alt="Gerrit clone"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Optionally, if you have SSH key installed to GitHub, you can import it to GerritHub and use that for authentication.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Paste the command to the terminal. Enter your generated password when prompted.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_making_a_change_with_gerrit">2.2.1. Making a Change with Gerrit</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the repository. Edit the <code>.travis.yml</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>language: java
install: true
script:
 - cd tutorial1
 - mvn clean install</code></pre>
</div>
</div>
</li>
<li>
<p>Add, commit and push the changes. (One-liner: <code>git add . &amp;&amp; git commit -m "Making Travis skip the install step" &amp;&amp;  git push</code>)</p>
</li>
<li>
<p>Observe the created commit message with <code>git log</code>. Observe the changes synced to GitHub, too.</p>
</li>
<li>
<p>Create a new change to the code, remove the recently added <code>install: true</code> line from <code>.travis.yml</code> and create a new commit. Do not push it yet!</p>
</li>
<li>
<p>Issue <code>git push origin HEAD:refs/for/master</code>. The outputs should show that a new Gerrit change is created.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">Counting objects: 3, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 1.01 KiB | 0 bytes/s, done.
Total 3 (delta 1), reused 0 (delta 0)
remote: Resolving deltas: 100% (1/1)
remote: Processing changes: new: 1, done
remote:
remote: New Changes:
remote:   https://review.gerrithub.io/#/c/imbur/ecse429-tutorial1/+/425671 Removing no-op install step from travis conf
remote:
To https://imbur@review.gerrithub.io/a/imbur/ecse429-tutorial1
 * [new branch]      HEAD -&gt; refs/for/master</code></pre>
</div>
</div>
</li>
<li>
<p>Navigate to your GerritHub dashboard. Observe the changes there.<br>
<span class="image"><img src="./figs/gerrithub-dashboard.png" alt="Gerrithub dashboard"></span></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
GitHub does not sync Gerrit changes, since they are pushed to a gerrit-specific branch (<code>refs/for/<a href="#branchname">[branchname]</a></code>).
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_review_and_manage_a_change_with_gerrit">2.2.2. Review and Manage a Change with Gerrit</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on the change and explore the options on the web interface.<br>
<span class="image"><img src="./figs/gerrit-change-online.png" alt="Gerrit change online view"></span></p>
</li>
<li>
<p>Comment on the <code>.travis.yml</code> file within the change suggesting that JDK8 should be used with the project.<br>
<span class="image"><img src="./figs/gerrit-comment.png" alt="Gerrit comment"></span></p>
</li>
<li>
<p>The comment will remain a draft up to the point until you submit your review. Click on the <em>Reply&#8230;&#8203;</em> button on the overview page for the change.<br>
<span class="image"><img src="./figs/gerrit-review.png" alt="Gerrit review"></span></p>
</li>
<li>
<p>Implement the modifications.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>language: java
jdk:
 - oraclejdk8
script:
 - cd tutorial1
 - mvn clean install</code></pre>
</div>
</div>
</li>
<li>
<p>Append these modifications to the change</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">&gt; git add .
&gt; git commit --amend
&gt; git push origin HEAD:refs/for/master</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
It is very important to add that in git amending a pushed commit is a history-rewriting operation, that is in most cases to be avoided. However, Gerrit follows these changes by amending a previous commit that holds the previous version of the change.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Observe the new patch set online.<br>
<span class="image"><img src="./figs/gerrit-patch-sets.png" alt="Gerrit patch sets"></span></p>
</li>
<li>
<p>Approve and verify the change.<br>
<span class="image"><img src="./figs/gerrit-approve.png" alt="Gerrit approving a change"></span></p>
</li>
<li>
<p>Submit the changes to the <code>master</code> branch.<br>
<span class="image"><img src="./figs/gerrit-submit.png" alt="Submit change to master"></span></p>
</li>
<li>
<p>Soon the commit becomes visible in GitHub as well. Make sure to pull afterwards to update your local branches.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unit_testing_frameworks">3. Unit Testing Frameworks</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>This material is included in two public tutorials:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>AssertJ: <a href="http://www.vogella.com/tutorials/AssertJ/article.html" class="bare">http://www.vogella.com/tutorials/AssertJ/article.html</a> (Sections 1-6)</p>
</li>
<li>
<p>JUnit5: <a href="http://www.vogella.com/tutorials/JUnit/article.html#junit5" class="bare">http://www.vogella.com/tutorials/JUnit/article.html#junit5</a> (Sections 10-11)</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_static_analysis">4. Static Analysis</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_prerequisites">4.1. Prerequisites</h3>
<div class="paragraph">
<p>This tutorial assumes that you have <code>maven</code> version 3.x.x installed on your computer. To create a new, default, maven project, simply type the command <code>mvn -B archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DgroupId=com.mcgill.ca.tutorial3 -DartifactId=tutorial3</code> in the folder of your choice.</p>
</div>
<div class="paragraph">
<p>Next we will update the JUnit dependencies. Locate your <code>pom.xml</code> file that was created after the above command. The default generated <code>pom.xml</code> should look something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.mcgill.ca&lt;/groupId&gt;
  &lt;artifactId&gt;tutorial3&lt;/artifactId&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;name&gt;tutorial-3&lt;/name&gt;
  &lt;url&gt;http://maven.apache.org&lt;/url&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;3.8.1&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Change the version number for JUnit from 3.8.1 to 4.12 and remove the <code>&lt;scope&gt;test&lt;/scope&gt; tag</code>.</p>
</div>
<div class="paragraph">
<p>Change the <code>AppTest.java</code> class definition to a single empty test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.mcgill.ca.tutorial3;

import org.junit.Test;

public class AppTest
{
	@Test
	public void emptyTest() {
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, to make sure everything is working correctly, run the command <code>mvn clean install</code> and check that the build succeeded.</p>
</div>
<div class="paragraph">
<p>No git repository is created for this project. If you already have a repository containing this project and wish to use that one, ignore the steps having the (<em>Optional</em>) tag</p>
</div>
<div class="paragraph">
<p>This default project will be used in the next sections.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sonarqube_static_code_analysis">4.2. SonarQube Static Code Analysis</h3>
<div class="paragraph">
<p>This section looks at how to use SonarQube, both integrated with Travis and as a standalone setup.</p>
</div>
<div class="sect3">
<h4 id="_offline_sonarqube_installation">4.2.1. Offline SonarQube Installation</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the folder of the working copy of your repository used during the previous tutorial. If you no longer keep a working copy, clone it again.</p>
</li>
<li>
<p>Go to the SonarQube main page (<a href="https://www.sonarqube.org/" class="bare">https://www.sonarqube.org/</a>) and click on the blue <em>Download</em> button.<br>
<span class="image"><img src="./figs/sonarQube1.png" alt="Download SonarQube"></span></p>
</li>
<li>
<p>Click on the blue <em>Community Edition 7.3</em> button<br>
<span class="image"><img src="./figs/sonarQube2.png" alt="Download Community Edition"></span></p>
</li>
<li>
<p>Extract the sonarqube-7.3.zip to the location of your choice.<br>
For this tutorial, we unzipped it in C:\</p>
</li>
<li>
<p>Start the SonarQube Server.<br>
Assuming you are in the root folder of the sonarqube directory, that is <code>C:\sonarqube-7.3</code> this example, you run either:<br>
<code>.\bin\[OS]\StartSonar.bat</code> for windows or <code>./bin/[OS]/sonar.sh console</code> for linux or mac environments.<br>
The OSs that are included are:<br></p>
<div class="ulist">
<ul>
<li>
<p>windows-x86-32<br></p>
</li>
<li>
<p>windows-x86-64<br></p>
</li>
<li>
<p>macosx-universal-64<br></p>
</li>
<li>
<p>linux-x86-32<br></p>
</li>
<li>
<p>linux-x86-64<br>
In this example, we have a Windows machine, so we use <code>.\bin\windows-x86-64\StartSonar.bat</code> as a command. The server should boot and when it is finally ready, you should get an output similar to this<br>
<span class="image"><img src="./figs/sonarQube3.png" alt="SonarQube terminal ready"></span><br>
SonarQube created a default webserver at localhost:9000. If you type the latter in your Internet browser, you should get the following page<br>
<span class="image"><img src="./figs/sonarQube4.png" alt="SonarQube About Page"></span></p>
</li>
</ul>
</div>
</li>
<li>
<p>Log in the server<br>
The default account created for your page is admin:admin<br>
<span class="image"><img src="./figs/sonarQube5.png" alt="SonarQube Default Logged In Page"></span></p>
</li>
<li>
<p>Create Basic Code Smells in the Project<br>
Locate the file <code>App.java</code> in your maven project and change the class definition to the following:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse429;

public class App
{
    private int x;

    public static void main( String[] args )
    {
    	String s = null;
    	System.out.println(s.length());
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>8 Edit the <code>pom.xml</code><br>
Add the Sonar Maven plugin and its configuration to the project (e.g., after the <code>&lt;/dependencies&gt;</code> closing tag)<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">...
&lt;build&gt;
	&lt;plugins&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;
			&lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.5.0.1254&lt;/version&gt;
		&lt;/plugin&gt;
	&lt;/plugins&gt;
&lt;/build&gt;

&lt;profiles&gt;
	&lt;profile&gt;
		&lt;id&gt;sonar&lt;/id&gt;
		&lt;activation&gt;
			&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
		&lt;/activation&gt;
		&lt;properties&gt;
		&lt;!-- Optional URL to server. Default value is http://localhost:9000 --&gt;
			&lt;sonar.host.url&gt;
				http://localhost:9000
			&lt;/sonar.host.url&gt;
		&lt;/properties&gt;
	&lt;/profile&gt;
&lt;/profiles&gt;
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For gradle 2.1 and above, add the following snippet to the build script:<br>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">plugins {
  id "org.sonarqube" version "2.6.2"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
Then, you can run analysis using <code>gradle sonarqube</code></p>
</div>
<div class="paragraph">
<p>9 Build the Project<br>
In another terminal, run the command <code>mvn clean install sonar:sonar</code> at the root of the project folder<br>
You should get an output similar to this:<br>
<span class="image"><img src="./figs/sonarQube6.png" alt="SonarQube Terminal Output"></span><br>
If we visit the link in the terminal output (it follows the format of <a href="http://localhost:9000/dashboard?id=&lt;INSERT_PROJECT_NAME&gt;" class="bare">http://localhost:9000/dashboard?id=&lt;INSERT_PROJECT_NAME&gt;</a>), we are brought to a page similar to this:<br>
<span class="image"><img src="./figs/sonarQube7.png" alt="SonarQube Web Output"></span><br></p>
</div>
<div class="paragraph">
<p>10 Investigate the Error Causes:</p>
</div>
<div class="paragraph">
<p>Click on <em>Code</em> in the toolbar above. Then select the package containing the <code>App.java</code> class from the list and click on <code>App.java</code> and click on the red icons on the left of your code.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/sonarQube8.png" alt="App errors"></span></p>
</div>
<div class="sect4">
<h5 id="_adding_code_coverage">Adding Code Coverage</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the <code>pom.xml</code> and add a new <code>profile</code> somewhere between the <code>&lt;profiles&gt;</code> tags</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">&lt;profile&gt;
&lt;id&gt;sonar-coverage&lt;/id&gt;
&lt;activation&gt;
&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
&lt;/activation&gt;
&lt;build&gt;
&lt;pluginManagement&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.jacoco&lt;/groupId&gt;
      &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;0.7.8&lt;/version&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/pluginManagement&gt;
&lt;plugins&gt;
  &lt;plugin&gt;
    &lt;groupId&gt;org.jacoco&lt;/groupId&gt;
    &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
      &lt;append&gt;true&lt;/append&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
      &lt;execution&gt;
	&lt;id&gt;agent-for-ut&lt;/id&gt;
	&lt;goals&gt;
	  &lt;goal&gt;prepare-agent&lt;/goal&gt;
	&lt;/goals&gt;
      &lt;/execution&gt;
      &lt;execution&gt;
	&lt;id&gt;jacoco-site&lt;/id&gt;
	&lt;phase&gt;verify&lt;/phase&gt;
	&lt;goals&gt;
	  &lt;goal&gt;report&lt;/goal&gt;
	&lt;/goals&gt;
      &lt;/execution&gt;
    &lt;/executions&gt;
  &lt;/plugin&gt;
  &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/profile&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Write a Dummy Test</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In <code>AppTest.java</code>, substitute <code>emptyTest</code> with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void mainTest() {
    App.main(null);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>3 Run the command <code>mvn clean install sonar:sonar</code> once again</p>
</div>
<div class="paragraph">
<p>4 Use the outputted URL to inspect the changes in SonarQube<br></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/sonarQube9.png" alt="SonarQube Offline Code Coverage"></span></p>
</div>
<div class="paragraph">
<p>5 Click on the <code>75%</code> of the <code>Code Coverage</code> Section</p>
</div>
<div class="paragraph">
<p>6 Click on the <code>App.java</code> file in the list</p>
</div>
<div class="paragraph">
<p>7 Look to the left of the red error icons. We now see which lines were tested by the unit tests.<br></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/sonarQube10.png" alt="SonarQube Offline Code Coverage for App.java"></span></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sonarqube_integrated_with_travis">4.2.2. SonarQube Integrated With Travis</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Register your Github Account in this link (<a href="https://sonarcloud.io/sessions/new?return_to=%2Faccount%2Fsecurity" class="bare">https://sonarcloud.io/sessions/new?return_to=%2Faccount%2Fsecurity</a>)<br>
<span class="image"><img src="./figs/sonarQube-ci-1.png" alt="SonarCloud Login page"></span><br>
<span class="image"><img src="./figs/sonarQube-ci-2.png" alt="SonarCloud Token Generation Page"></span></p>
</li>
<li>
<p>Add a security token of your choice and store in a file of your choice<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
It is important to copy it somewhere; you will not be able to see it again afterwards<br>
<span class="image"><img src="./figs/sonarQube-ci-3.png" alt="Generated Token"></span>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Click on your picture in the top right-hand side of the toolbar, next to the search bar, then on the button <em>My Organizations</em><br>
<span class="image"><img src="./figs/sonarQube-ci-4.png" alt="My Organization"></span></p>
</li>
<li>
<p>Jot down the key given by SonarCloud.io under the <em>Create</em> button<br></p>
</li>
<li>
<p>Add a <code>.travis.yml</code> file to the project&#8217;s directory<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>language: java
sudo: false
install: true

addons:
  sonarcloud:
    organization: "[YOUR ORGANIZATION KEY]"
    token:
      secure: "[YOUR GENERATED TOKEN]"


jdk:
  - oraclejdk8

script:
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent package sonar:sonar

cache:
  directories:
    - '$HOME/.m2/repository'
    - '$HOME/.sonar/cache'</pre>
</div>
</div>
<div class="paragraph">
<p>For this example, the <code>addons</code> section would look like<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">addons:
  sonarcloud:
    organization: "codewinger-github"
    token:
      secure: "3910246b05e26646a6c26ab025f3bd6140b9e3a4"</code></pre>
</div>
</div>
<div class="paragraph">
<p>6 Create a new local repository with the command <code>git init</code> (<em>Optional</em>)<br></p>
</div>
<div class="paragraph">
<p>7 Create a new upstream repository on GitHub (<em>Optional</em>)<br>
After creating the repository, from the command line enter the commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>git remote add origin https://github.com/[YOUR GITHUB ID]/[YOUR REPO NAME].git</code></pre>
</div>
</div>
<div class="paragraph">
<p>In my case, the above would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>git remote add origin https://github.com/CodeWinger/tutorial3.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>8 Add a <code>.gitignore</code> file (<em>Optional</em>)<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code># Compiled class file
*.class

# Log file
*.log

# BlueJ files
*.ctxt

# Mobile Tools for Java (J2ME)
.mtj.tmp/

# Package Files #
*.jar
*.war
*.nar
*.ear
*.zip
*.tar.gz
*.rar

# virtual machine crash logs, see http://www.java.com/en/download/help/error_hotspot.xml
hs_err_pid*</code></pre>
</div>
</div>
<div class="paragraph">
<p>9 Push your work from the <code>master</code> branch to GitHub with the command <code>git add . &amp;&amp; git commit -m "SonarCloud Integration" &amp; git push origin master:master --set-upstream</code><br>
We need to first analyze the <code>main</code> branch before we can analyze new branches along with their differences with the <code>master</code> branch
Your output should look something like this:<br>
<span class="image"><img src="./figs/sonarQube-ci-5.png" alt="Default projects space"></span></p>
</div>
<div class="paragraph">
<p>10 Copy the outputted URL (<a href="https://sonarcloud.io/dashboard?id=mcgill.ecse429%3Atutorial2" class="bare">https://sonarcloud.io/dashboard?id=mcgill.ecse429%3Atutorial2</a>, in this case) and paste it in your Internet browser.<br>
<span class="image"><img src="./figs/sonarQube-ci-6.png" alt="Analyzed Project"></span></p>
</div>
<div class="paragraph">
<p>11 From the <code>master</code> branch, create and checkout a new branch <code>git branch sonarqube-travis-integration &amp;&amp; git checkout sonarqube-travis-integration</code></p>
</div>
<div class="paragraph">
<p>12 Modify `App.java&#8217;s class definition:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class App
{
    public static void main( String[] args )
    {
    	if (args == null || args.length == 0) {
    		System.out.println("no input");
    		return;
    	}

    	for (String argument : args) {
    		System.out.println(argument);
    	}
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>13 Modify `AppTest.java&#8217;s class definition:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.junit.Test;

public class AppTest
{
	@Test
	public void testMainMethodForNull() {
		App.main(null);
	}

	@Test
	public void testMainMethodForEmptyArray() {
		App.main(new String[0]);
	}

	@Test
	public void testMainMethodForNonEmptyArray() {
		String[] args = {"Hello", "World"};
		App.main(args);
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>14 Push your work on the branch and check the output in SonarCloud.io (<code>git add . &amp;&amp; git commit -m "SonarCloud Integration" &amp; git push -u origin sonarqube-travis-integration</code><br>
<span class="image"><img src="./figs/sonarQube-ci-7.png" alt="New Branch"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sonarcloud_integration_for_project_deliverable">4.3. SonarCloud integration for Project deliverable</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>One team member is registered to SonarCloud organization McGill ECSE429 Fall2018. Follow the steps with that team member&#8217;s SonarCloud account.</p>
</li>
<li>
<p>Create a SonarCloud project <em>under the organization</em> (and not under your user). Name it <code>team-NO-blokish</code>, where <code>NO</code> is the placeholder for the two digit team number. Assign a unique project key to it afterwards as shown below.<br>
<span class="image"><img src="./figs/sc-create-proj.png" alt="New Project"></span></p>
</li>
<li>
<p>Generate an access token for the project.
<span class="image"><img src="./figs/sc-generate-token.png" alt="SC Access Token"></span></p>
</li>
<li>
<p>On the next page, you will be shown two snippets:</p>
<div class="ulist">
<ul>
<li>
<p>one is to be added to the <code>build.gradle</code> file</p>
</li>
<li>
<p>the other one is the command you can use out-of-the box to build and analyze on SonarCloud
<span class="image"><img src="./figs/sc-project-build.png" alt="SC Snippets"></span></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_infer_static_analyzer">4.4. Infer Static Analyzer</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create and checkout a new branch from master (<code>git branch infer &amp;&amp; git checkout infer</code>)</p>
</li>
<li>
<p>Edit the .travis.yml file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">dist: trusty
sudo: required
language: java
jdk: oraclejdk7

script:
 - #TODO: get infer archive and extract it
 - #TODO: add infer executable to the path
 - #TODO: invoke infer with your project</code></pre>
</div>
</div>
</li>
<li>
<p>Introduce a null warning
In the default file <code>App.java</code>, change the main method to the following:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static void main( String[] args ) {
    String s = null;
    System.out.println(s.length());
}</code></pre>
</div>
</div>
</li>
<li>
<p>Commit and push the 2 modified files (<code>commit add . &amp;&amp; git commit -m "Added Infer Static Analyzer" &amp;&amp; git push -u origin infer</code>)</p>
</li>
<li>
<p>Go to <a href="https://travis-ci.com/" class="bare">https://travis-ci.com/</a> to see your build processes. It should look something similar to this:<br>
<span class="image"><img src="./figs/infer-1.png" alt="Infer Basic Output"></span></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_test_generation_and_code_coverage">5. Test Generation and Code Coverage</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_evosuite_installation_and_initial_project_setup">5.1. EvoSuite Installation and Initial Project Setup</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For this session, we are reusing a sligthly modified version of the example project <a href="https://github.com/cseppento/gradle-evosuite-plugin/tree/master/test-projects/simple">available here</a>.<br>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download EvoSuite Commandline tool from <a href="http://www.evosuite.org/downloads/" class="bare">http://www.evosuite.org/downloads/</a><br></p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
EvoSuite is not compatible yet with Java 9 and above.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Fork the <a href="https://github.com/McGill-ECSE429-Fall2018/ecse429-tutorial-5">ecse429-tutorial-5</a> repository <strong>under your GitHub user</strong>.<br></p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
After creating your fork, it is important to apply the steps below to your own fork (and not on the organization&#8217;s repository).
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Go to <a href="https://travis-ci.com/account/repositories" class="bare">https://travis-ci.com/account/repositories</a> and make sure you see the fork on Travis. If not, synchronize with GitHub.<br>
<span class="image"><img src="./figs/travis-repo-visibility.png" alt="Repositories visible to Travis"></span></p>
</li>
<li>
<p>Click on <em>Settings</em> with the cogs icon next to the repository&#8217;s name. Under <em>More options &gt; Settings</em> Set the value of the <code>SONAR_TOKEN</code> environment variable (the value is the token obtained from sonarcloud.io earlier) for <strong>your fork&#8217;s</strong> build.<br>
<span class="image"><img src="./figs/travis-sonar-token.png" alt="Set sonar token"></span></p>
</li>
<li>
<p>Clone your fork of the repository to your computer.</p>
</li>
<li>
<p>Replace <strong>both</strong> <code>project.key</code> and <code>project.name</code> properties in <code>.travis.yml</code> with <code>ecse429-tutorial-5-YOUR_GITHUB_USERNAME</code>. Commit and push your changes afterwards and see your project automatically built on Travis-CI and analyzed on SonarCloud.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_generating_tests_using_evosuite">5.2. Generating Tests using EvoSuite</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In the following steps, we assume that the <code>EVOSUITE</code> environment variable points to the evosuite.jar executable, and the program can be started by issuing <code>java -jar $EVOSUITE</code>. For Windows: in the default Windows command line tool this would be <code>java -jar %EVOSUITE%</code>, while also make sure that the firewall settings allow EvoSuite to run.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the folder where your working copy of your tutorial 5 repository is located.</p>
</li>
<li>
<p>Explore the project sources.</p>
</li>
<li>
<p>Build the project locally using <code>./gradlew build</code> to generate classfiles.</p>
</li>
<li>
<p>You can run the app with <code>./gradlew run</code>.</p>
</li>
<li>
<p>Go to the folder <code>simple/</code> and generate tests for the class <code>SimpleStaticSut</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar $EVOSUITE -class com.github.cseppento.gradle.evosuite.testprojects.simple.SimpleStaticSut -projectCP build/classes/java/main/ -Duse_separate_classloader=false</code></pre>
</div>
</div>
</li>
<li>
<p>Explore the switches for EvoSuite with <code>java -jar $EVOSUITE -help</code>! Also observe the output of <code>java -jar $EVOSUITE -listParameters</code>!</p>
</li>
<li>
<p>Go to (or stay in) the folder <code>simple/</code> and generate tests for the class <code>SimpleObjectSut</code> with Branch coverage and also print the all test goals as well as the missed goals.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar $EVOSUITE -class com.github.cseppento.gradle.evosuite.testprojects.simple.SimpleObjectSut -projectCP build/classes/java/main/ -Duse_separate_classloader=false -criterion BRANCH -Dprint_goals=true -Dprint_missed_goals</code></pre>
</div>
</div>
</li>
<li>
<p>Try other settings according to <a href="https://github.com/EvoSuite/evosuite/wiki/Tutorial%3A-Part-1&#8212;&#8203;Evosuite-on-the-Command-Line#playing-with-evosuite-settings">EvoSuite documentation</a> to generate tests for the <code>SimpleObjectSut</code> class!</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_adding_the_generated_tests_to_the_build">5.3. Adding the Generated Tests to the Build</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Tests are generated under <code>simple/evosuite-tests</code>. We need to add them to the build.</p>
</li>
<li>
<p>First, add EvoSuite runtime to project dependencies to <code>simple/simple-deps.gradle</code>: <code>implementation 'org.evosuite:evosuite-standalone-runtime:1.0.6'</code></p>
</li>
<li>
<p>Modify the test sources list in <code>simple/simple-app.gradle</code> by adding the following lines to the end of the file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">sourceSets {
    test {
        java {
            srcDirs = ['./src/test/java' ,'./evosuite-tests']
        }
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Commit your tests and make sure they are executed by Gradle.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You might encounter build failure if you have <code>use_separate_classloader=false</code> set in EvoSuite test cases. If this is the case, switch it back to <code>use_separate_classloader=true</code>.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_measuring_code_coverage_with_android_studio">5.4. Measuring Code Coverage with Android Studio</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select a single test class or multiple tests classes, then open the right click menu to run them with coverage<br>
<span class="image"><img src="./figs/android-studio-run-coverage.png" alt="Android studio run coverage"></span></p>
</li>
<li>
<p>Android Studio will show the coverage report after running the test. It also highlights which lines were executed by at least one of the test cases<br>
<span class="image"><img src="./figs/android-studio-coverage.png" alt="Coverage results"></span></p>
</li>
<li>
<p>You can also export and view coverage results using the button shown below<br>
<span class="image"><img src="./figs/test-report-gen.png" alt="Coverage report"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_cleaning_up_the_project">5.5. Cleaning Up the Project</h3>
<div class="paragraph">
<p><strong>IMPORTANT</strong>: At the end of the tutorial, turn off the build on Travis-CI and delete the project in SonarCloud as shown below, so that this demo project is not taking up the allowed line count on SonarCloud<br>
<em>Travis</em>:<br>
<span class="image"><img src="./figs/travis-turn-off-build.png" alt="Travis turn off build"></span><br>
<em>SonarCloud</em>:<br>
<span class="image"><img src="./figs/sonarcloud-delete.png" alt="SonarCloud delete"></span></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mutation_testing">6. Mutation Testing</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_mutation_testing_using_pit">6.1. Mutation Testing Using PIT</h3>
<div class="paragraph">
<p>This tutorial covers the basics of using PIT (link:http://pitest.org/), both as part of a build using Gradle and using an Eclipse plugin.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For this tutorial, we assume that you the Gradle Eclipse plugin installed on your computer.<br>
We will create a Gradle project from scratch and be testing the method from the fourth question of your first assignment <em>returnAverage(int[], int, int, int)</em> .
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new Gradle project in Eclipse by clicking on <em>File</em> &gt; <em>New</em> &gt; <em>Other</em><br>
<span class="image"><img src="./figs/pit-testing-fig-1.png" alt="New Project"></span></p>
</li>
<li>
<p>Under <em>Gradle</em>, choose Gradle Project<br>
<span class="image"><img src="./figs/pit-testing-fig-2.png" alt="New Gradle Project"></span></p>
</li>
<li>
<p>Click on <em>Next</em>, <em>Next</em>, then name your project <em>tutorial6</em>, click on <em>Finish</em><br>
<span class="image"><img src="./figs/pit-testing-fig-3.png" alt="Project Name"></span><br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The project may take some time to be created.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a new package instead of the default ones for both the source and test folders (e.g <code>com.mcgill.ecse429.tutorial6</code>) and move the default generated classes (<code>Library</code> and <code>LibraryTest</code>) to this package.<br>
<span class="image"><img src="./figs/pit-testing-fig-4.png" alt="Create Packages"></span></p>
</li>
<li>
<p>Change the code in the <code>Library</code> class</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.mcgill.ecse429.tutorial6;

public class Library {

	public static double returnAverage(int value[], int arraySize, int MIN, int MAX) {
		int index, ti, tv, sum;
		double average;
		index = 0;
		ti = 0;
		tv = 0;
		sum = 0;
		while (ti &lt; arraySize &amp;&amp; value[index] != -999) {
			ti++;
			if (value[index] &gt;= MIN &amp;&amp; value[index] &lt;= MAX) {
				tv++;
				sum += value[index];
			}
			index++;
		}
		if (tv &gt; 0)
			average = (double) sum / tv;
		else
			average = (double) -999;
		return average;
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>Change the code in the <code>LibraryTest</code> class</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.mcgill.ecse429.tutorial6;

import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class LibraryTest {

	@Test
	public void allBranchCoverageMinimumTestCaseForReturnAverageTest1() {
		int[] value = {5, 25, 15, -999};
		int AS = 4;
		int min = 10;
		int max = 20;
		double average = Library.returnAverage(value, AS, min, max);
		assertEquals(15, average, 0.1);
	}

	@Test
	public void allBranchCoverageMinimumTestCaseForReturnAverageTest2() {
		int[] value = {};
		int AS = 0;
		int min = 10;
		int max = 20;
		double average = Library.returnAverage(value, AS, min, max);
		assertEquals(-999.0, average, 0.1);
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run the Test in coverage mode using Eclemma.<br>
<span class="image"><img src="./figs/pit-testing-fig-5.png" alt="Full Branch Coverage"></span></p>
</li>
<li>
<p>Verify that we have 100% branch coverage.<br>
<span class="image"><img src="./figs/pit-testing-fig-6.png" alt="Full Branch Coverage-Eclemma"></span></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_using_gradle_with_pit_testing">6.2. Using Gradle with PIT testing</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Modify the <code>build.gradle</code> file to include the pitest plugin</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">apply plugin: 'java'
apply plugin: 'java-library'

sourceCompatibility = JavaVersion.VERSION_1_8

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'info.solidsoft.gradle.pitest:gradle-pitest-plugin:1.3.0'
    }
}

repositories {
    jcenter()
}

dependencies {
    testCompile "junit:junit:4.12"

    compile "args4j:args4j:2.0.21"
    compile "org.codehaus.groovy:groovy-all:2.3.7"
}

apply plugin: 'info.solidsoft.pitest'

pitest {
    targetClasses = ["com.mcgill.ecse429.tutorial6*"]
    timestampedReports = true
}</code></pre>
</div>
</div>
</li>
<li>
<p>Navigate to the project folder and run the command <code>gradle build pitest</code> (you can also use the Gradle wrapper script)<br>
<span class="image"><img src="./figs/pit-testing-fig-7.png" alt="gradle-pitest"></span></p>
</li>
<li>
<p>In your projects root folder, open the file <code>./build/reports/pitests/{TIMESTAMP}/index.html</code>, then navigate to the report for the <code>Library</code> class<br>
<span class="image"><img src="./figs/pit-testing-fig-8.png" alt="gradle-pitest-report"></span><br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You may have a different output as the one shown. This is normal as the types and number of mutants may vary each run.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Look at the reports and get familiar with it.<br>
We can see the code coverage, the location where the mutations took place, the mutations themselves, the types of mutators and the test suite used to assess mutation score.</p>
</li>
<li>
<p>From the ouput above, we update the test cases<br>
The test cases are not killing all mutants due to not checking <code>value[index] == MIN</code> and <code>value[index] == MAX</code> conditions in the boundary. A similar problem occurs for <code>ti == arraySize</code> in the while loop. <code>LibraryTest.java</code> now contains:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.mcgill.ecse429.tutorial6;

import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class LibraryTest {

	@Test
	public void allBranchCoverageMinimumTestCaseForReturnAverageTest1() {
		int[] value = {5, 25, 10, 20, -999};
		int AS = 5;
		int min = 10;
		int max = 20;
		double average = Library.returnAverage(value, AS, min, max);
		assertEquals(15, average, 0.1);
	}

	@Test
	public void allBranchCoverageMinimumTestCaseForReturnAverageTest2() {
		int[] value = {};
		int AS = 0;
		int min = 10;
		int max = 20;
		double average = Library.returnAverage(value, AS, min, max);
		assertEquals(-999.0, average, 0.1);
	}

}</code></pre>
</div>
</div>
</li>
<li>
<p>Rerun pit mutation with <code>gradle build pitest</code> and reopen the outputted report <code>index.html</code><br>
<span class="image"><img src="./figs/pit-testing-fig-9.png" alt="gradle-pitest-report-2"></span></p>
</li>
<li>
<p>After the second run, we see that the line <code>ti++;</code> inside the while loop is useless and a code smell!</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_pit_testing">6.3. Configuring PIT testing</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To understand the different mutants, you can go <a href="http://pitest.org/quickstart/mutators/">here</a>.</p>
</li>
<li>
<p>You can customize the plugin in the <code>builde.gradle</code> file using all the parameters for the command line.<br>
Reference: <a href="http://pitest.org/quickstart/commandline/" class="bare">http://pitest.org/quickstart/commandline/</a></p>
</li>
<li>
<p>For example, we can specify the mutators we want in <code>build.gradle</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">...
pitest {
    targetClasses = ["com.mcgill.ecse429.tutorial6*"]
    timestampedReports = true
    mutators=['NEGATE_CONDITIONALS','CONDITIONALS_BOUNDARY']
}
...</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_using_pit_in_eclipse">6.4. Using PIT in Eclipse</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <em>Help</em> &gt; <em>Eclipse Marketplace</em><br>
<span class="image"><img src="./figs/pit-testing-fig-10.png" alt="download"></span></p>
</li>
<li>
<p>Type <em>pit</em> in the search box and find <em>Pitclipse</em><br>
<span class="image"><img src="./figs/pit-testing-fig-11.png" alt="download"></span></p>
</li>
<li>
<p>Restart your Eclipse after the installation is successful</p>
</li>
<li>
<p>You can now executet the tests in <code>LibraryTest</code> class by selecting <em>Pit Mutation Test</em> from the available run configurations.<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you get a <code>NullPointerException</code> for the first run, try re-running it.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/pit-testing-fig-12.png" alt="pit run as"></span></p>
</div>
</li>
<li>
<p>Check the output in the console for where the report is generated.<br>
<span class="image"><img src="./figs/pit-testing-fig-13.png" alt="pit run"></span><br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The output of the report should be identical to the one we generated with the Gradle plugin
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_integration_testing">7. Integration Testing</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_testing_using_mocks">7.1. Testing Using Mocks</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a id="initial-project"></a>Clone (or fork and clone the fork of) the initial project from <a href="https://github.com/McGill-ECSE429-Fall2018/ecse429-tutorial-7">this link</a> and import it to Android Studio.</p>
</li>
<li>
<p>Open the project with Android Studio and verify that it builds fine from the IDE (or by running the corresponding Gradle wrapper).</p>
</li>
<li>
<p>Explore the (not too complex) application sources. Start the app and try its features as well.</p>
</li>
<li>
<p>Add the Mockito gradle dependency in <code>app/build.gradle</code> for compiling test sources: <code>testImplementation 'org.mockito:mockito-core:2.23.0'</code></p>
</li>
<li>
<p>In the same <code>build.gradle</code> file, add to the <code>android</code> task</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">testOptions {
        unitTests.returnDefaultValues = true
}</code></pre>
</div>
</div>
</li>
<li>
<p>Locate the <code>ExampleUnitTest.java</code> and refactor the class' name to <code>IntegrationTest</code>.<br>
<span class="image"><img src="./figs/refactor-test-class.png" alt="Refactor class name"></span></p>
</li>
<li>
<p>Add the following code to the class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration;

import com.loopj.android.http.AsyncHttpClient;
import com.loopj.android.http.BlackholeHttpResponseHandler;
import com.loopj.android.http.RequestParams;

import org.junit.Before;
import org.junit.Test;
import org.mockito.Mock;
import org.mockito.Mockito;

public class IntegrationTest {

    @Mock
    AsyncHttpClient httpClient;

    HttpUtils httpUtils;

    @Before
    public void setUp(){
        httpUtils = new HttpUtils(httpClient);
    }

    @Test
    public void testHttpPostCalled() {
        String url = "participants/";
        RequestParams params = new RequestParams();
        BlackholeHttpResponseHandler handler = new BlackholeHttpResponseHandler();

        // Call the SUT
        httpUtils.post(url, params, handler);

        // Verify interactions
        Mockito.verify(httpClient).post(HttpUtils.getBaseUrl() + url, params, handler);
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run the test as JUnit test (failure is expected). Try understanding the error message!</p>
</li>
<li>
<p>Add the following annotation to the test class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// ... other imports
import org.junit.runner.RunWith;
import org.mockito.junit.MockitoJUnitRunner;

@RunWith(MockitoJUnitRunner.class)
public class IntegrationTest {
    // ...
}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_local_ui_tests">7.2. Local UI Tests</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following to the module&#8217;s <code>build.gradle</code> file within the <code>android</code> task</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">android {
    testOptions {
        unitTests {
            includeAndroidResources = true
        }
    }
    // ... other settings
}</code></pre>
</div>
</div>
</li>
<li>
<p>In this same Gradle file, add/verify dependencies</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">testImplementation 'junit:junit:4.12'
testImplementation 'org.mockito:mockito-core:2.23.0'
testImplementation 'org.robolectric:robolectric:4.0'</code></pre>
</div>
</div>
</li>
<li>
<p>Create a new test class <code>LocalUITest</code> within the <code>src/test/java</code> directory in package <code>ca.mcgill.ecse321.eventregistration</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration;

import com.loopj.android.http.AsyncHttpClient;
import com.loopj.android.http.RequestParams;
import com.loopj.android.http.ResponseHandlerInterface;

import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.junit.MockitoJUnit;
import org.mockito.junit.MockitoRule;
import org.robolectric.Robolectric;
import org.robolectric.RobolectricTestRunner;

@RunWith(RobolectricTestRunner.class)
public class LocalUITest {

    @Rule
    public MockitoRule mockitoRule = MockitoJUnit.rule();

    @Mock
    public AsyncHttpClient httpClient;

    @Test
    public void aTest() {
        MainActivity mainActivity = Robolectric.setupActivity(MainActivity.class);
        mainActivity.setHttpUtils(new HttpUtils(httpClient));
        mainActivity.addParticipant(null);
        Mockito.verify(httpClient).post(Mockito.anyString(),Mockito.&lt;RequestParams&gt;any(),Mockito.&lt;ResponseHandlerInterface&gt;any());
    }

}</code></pre>
</div>
</div>
</li>
<li>
<p>Run it as a local test.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_android_instrumentation_tests">7.3. Android Instrumentation Tests</h3>
<div class="paragraph">
<p>With Android, we have previously created <strong>Local tests</strong> that that run on your local machine only. In this tutorial we show how you can create <strong>Instrumented tests</strong>, unit tests that run on an Android device or emulator. See more about the difference between local and instrumentation tests at: <a href="https://developer.android.com/training/testing/unit-testing/" class="bare">https://developer.android.com/training/testing/unit-testing/</a>.</p>
</div>
<div class="sect3">
<h4 id="_project_dependencies_and_setup">7.3.1. Project dependencies and setup</h4>
<div class="paragraph">
<p>This section takes configurations from the <a href="https://developer.android.com/training/testing/set-up-project">Android documentation</a>. You can follow the steps below by reusing the example project from <a href="07-Testing-Using-Mocks.html#initial-project">the first step of the previous section</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the used libraries to <code>&lt;module-name&gt;/src/main./AndroidManifest.xml</code> <strong>within</strong> the <code>&lt;application&gt;&#8230;&#8203;&lt;/application&gt;</code> tags</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;uses-library android:name="android.test.base"
    android:required="false" /&gt;
&lt;uses-library android:name="android.test.runner"
    android:required="false" /&gt;
&lt;uses-library android:name="android.test.mock"
    android:required="false" /&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The next few steps will update the module&#8217;s <code>build.gradle</code> file (<code>&lt;module-name&gt;/build.gradle</code> file).</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Speficy the used libraries within the <code>android</code> task as well.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">android {
    // ... other settings
    useLibrary 'android.test.runner'
    useLibrary 'android.test.base'
    useLibrary 'android.test.mock'
    // ... other settings
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following instrumentation testing dependencies.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">dependencies {
    // ... other dependencies
    // Core library  
    androidTestImplementation 'androidx.test:core:1.0.0'
    // AndroidJUnitRunner and JUnit Rules  
    androidTestImplementation 'androidx.test:runner:1.1.0'
    androidTestImplementation 'androidx.test:rules:1.1.0'
    // Assertions  
    androidTestImplementation 'androidx.test.ext:junit:1.0.0'
    androidTestImplementation 'androidx.test.ext:truth:1.0.0'
    androidTestImplementation 'com.google.truth:truth:0.42'
    // Espresso dependencies  
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0'
    androidTestImplementation 'androidx.test.espresso:espresso-contrib:3.1.0'
    androidTestImplementation 'androidx.test.espresso:espresso-intents:3.1.0'
    androidTestImplementation 'androidx.test.espresso:espresso-accessibility:3.1.0'
    androidTestImplementation 'androidx.test.espresso:espresso-web:3.1.0'
    // Add these for applications having significant library dependencies  
    androidTestImplementation 'com.google.dexmaker:dexmaker:1.2'
    // Android-specific Mockito
    androidTestImplementation 'com.google.dexmaker:dexmaker-mockito:1.2:'
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For instrumentation tests only Mockito 1.9.x can be used currently (via the dexmaker dependency).
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Update the <code>android</code> task as shown below. You may need to download the new SDK version.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">android {
    compileSdkVersion 28
    // ...
    defaultConfig {
        minSdkVersion 18
        targetSdkVersion 28
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }
    // ...</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_creating_an_instrumentation_test">7.3.2. Creating an instrumentation test</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code>&lt;module-name&gt;/src/androidTest/java</code> folder structure. This is the default location where the framework will look for instrumentation tests.</p>
</li>
<li>
<p>Create a new test class <code>InstrumentationTest</code> under the same package name as the package name of the main activity.<br>
<span class="image"><img src="./figs/create-instrumentaiton-test-class.png" alt="Create instrumentation test class"></span><br>
<span class="image"><img src="./figs/create-instr-test-class.png" alt="Create instrumentation test class"></span></p>
</li>
<li>
<p>Add the imports and annotations as follows</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration;

import android.widget.Button;
import android.widget.ListView;

import com.loopj.android.http.AsyncHttpClient;
import com.loopj.android.http.JsonHttpResponseHandler;
import com.loopj.android.http.RequestParams;
import com.loopj.android.http.ResponseHandlerInterface;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.junit.Rule;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.Mock;
import org.mockito.Mockito;
import org.mockito.invocation.InvocationOnMock;
import org.mockito.runners.MockitoJUnitRunner;
import org.mockito.stubbing.Answer;

import androidx.test.filters.SmallTest;
import androidx.test.rule.ActivityTestRule;

import static com.google.common.truth.Truth.assertThat;

@RunWith(MockitoJUnitRunner.class)
@SmallTest
public class InstrumentationTest {

}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you are not planning on using Mockito with instrumentation tests, you can replace the <code>@RunWith(MockitoJUnitRunner.class)</code> annotation with <code>@RunWith(AndroidJUnit4.class)</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Within this class, create a private class that passes the JSON answer for a HTTP request via the handler (JSON Handler) extracted from the method call</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private class ParticipantsAnswer implements Answer&lt;JSONArray&gt; {
    @Override
    public Object answer(InvocationOnMock invocation) throws JSONException {
        Object[] arguments = invocation.getArguments();
        JsonHttpResponseHandler h = (JsonHttpResponseHandler) arguments[2];
        h.onSuccess(200,null,new JSONArray()
                .put(new JSONObject().put("name", "P1"))
                .put(new JSONObject().put("name", "P2"))
                .put(new JSONObject().put("name", "P3")));
        return null;
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add fields to the <code>InstrumentationTest</code> class</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Mock
AsyncHttpClient httpClient;

@Rule
public ActivityTestRule&lt;MainActivity&gt; activityTestRule = new ActivityTestRule&lt;&gt;(MainActivity.class);</code></pre>
</div>
</div>
</li>
<li>
<p>Add the implementation to the test case</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Test
public void aTest() throws Throwable {
    final MainActivity mainActivity = activityTestRule.getActivity();
    mainActivity.setHttpUtils(new HttpUtils(httpClient));

    Mockito.when(httpClient.get(Mockito.anyString(),Mockito.&lt;RequestParams&gt;anyObject(), Mockito.&lt;ResponseHandlerInterface&gt;anyObject())).thenAnswer(new ParticipantsAnswer());

    final ListView participantList = mainActivity.findViewById(R.id.participant_list);
    final int numberOfParticipants = participantList.getAdapter().getCount();

    assertThat(numberOfParticipants).isEqualTo(0);

    Button button = (Button) mainActivity.findViewById(R.id.button);
    button.performClick();

    int numberOfParticipants2 = participantList.getAdapter().getCount();
    assertThat(numberOfParticipants2).isEqualTo(3);
}</code></pre>
</div>
</div>
</li>
<li>
<p>After right clicking on the class you can run the instrumentation test. Select the virtual device to run the tests on.</p>
</li>
<li>
<p>The tests failed. Try understanding the error message!</p>
</li>
<li>
<p>Fix the tests by including the last part of the test in  <code>runOnUiThread()</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">activityTestRule.runOnUiThread(new Runnable() {
    @Override
    public void run() {
        Button button = (Button) mainActivity.findViewById(R.id.button);
        button.performClick();
        int numberOfParticipants2 = participantList.getAdapter().getCount();
        assertThat(numberOfParticipants2).isEqualTo(3);
    }
});</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, exploit the <em>Fluent API</em> of Mockito and clean up your code. Import all static methods with <code>static import</code>!</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_android_user_interface_tests">8. Android User Interface Tests</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>This tutorial shows how you can create UI tests using instrumentation testing with the <a href="https://github.com/RobotiumTech/robotium">Robotium framework</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clone the initial Android project from <a href="https://github.com/McGill-ECSE429-Fall2018/ecse429-tutorial-8">here</a> and import it to Android Studio.</p>
</li>
<li>
<p>Add the following dependency to the <code>app</code> module</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">dependencies {
  // ... other dependencies
   implementation 'com.jayway.android.robotium:robotium-solo:5.2.1'
}</code></pre>
</div>
</div>
</li>
<li>
<p>Create the <code>&lt;module-name&gt;/src/androidTest/java</code> folder structure.</p>
</li>
<li>
<p>Create a new test class <code>RobotiumTest</code> under the same package name as the package name of the main activity. (In the figure the class name does not match.)<br>
<span class="image"><img src="./figs/create-instrumentaiton-test-class.png" alt="Create instrumentation test class"></span><br>
<span class="image"><img src="./figs/create-instr-test-class.png" alt="Create instrumentation test class"></span></p>
</li>
<li>
<p>Add the initial implementation of the Robotium test class</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration;

import android.test.ActivityInstrumentationTestCase2;
import android.widget.EditText;

import com.robotium.solo.Solo;

public class RobotiumTest extends ActivityInstrumentationTestCase2&lt;MainActivity&gt; {
    private Solo solo;

    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "ca.mcgill.ecse321.eventregistration.MainActivity";

    private static Class&lt;?&gt; launcherActivityClass;

    static {
        try {
            launcherActivityClass = Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
        } catch (ClassNotFoundException e) {
            throw new RuntimeException(e);
        }
    }

    @SuppressWarnings("unchecked")
    public RobotiumTest() throws ClassNotFoundException {
        super((Class&lt;MainActivity&gt;) launcherActivityClass);
    }

    private String participantName;
    private String testParticipantName = "TestParticipant";

    @Override
    public void setUp() throws Exception {
        super.setUp();
        solo = new Solo(getInstrumentation());

        int uniqueId = 1586; // Ensure uniqueness of name
        participantName = "Participant" + uniqueId;
        getActivity();
    }

    @Override
    public void tearDown() throws Exception {
        solo.finishOpenedActivities();
        super.tearDown();
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add a test case to see if registration succeeds</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void testRegisterSucceeds() throws InterruptedException {
    solo.waitForActivity("MainActivity", 2000);

    EditText editText = solo.getEditText("Who?");
    solo.enterText(editText,participantName);
    solo.clickOnText(solo.getString(R.string.newparticipant_button));

    boolean errorTextFound = solo.waitForText("exception", 1, 5000);
    assertFalse(errorTextFound);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Create a participant named <em>TestParticipant</em> by issuing a POST request to <a href="https://eventregistration-backend-123.herokuapp.com/participants/TestParticipant" class="bare">https://eventregistration-backend-123.herokuapp.com/participants/TestParticipant</a></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Add a participant called TestParticipant to the database
curl -X POST https://eventregistration-backend-123.herokuapp.com/participants/TestParticipant

# Make sure participant was added by issuing a get request
curl GET https://eventregistration-backend-123.herokuapp.com/participants/</code></pre>
</div>
</div>
</li>
<li>
<p>Add a test case to see if registration fails if the participant is already in the database</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void testRegisterFails() throws InterruptedException {
    solo.waitForActivity("MainActivity", 2000);

    EditText editText = solo.getEditText("Who?");
    solo.enterText(editText,testParticipantName);
    solo.clickOnText(solo.getString(R.string.newparticipant_button));

    boolean errorTextFound = solo.waitForText("exception", 1, 5000);
    assertTrue(errorTextFound);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add a test case to see if the list of participant contains the existing participant "TestParticipant"</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"> public void testListRefreshes() {
    solo.clickOnText(solo.getString(R.string.refresh_participant_list));

    boolean textFound = solo.waitForText(testParticipantName, 1, 5000, true);

    assertTrue(textFound);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Start the Robotium Instrumentation Test on seleted device</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_running_android_emulator_on_travis_ci">8.1. Running Android Emulator on Travis-CI</h4>
<div class="paragraph">
<p>Instrumentation tests require a runtime Android. This means Travis needs to run one instance during the build to successfully execute tests. You can use the following example configuration for getting started on how to run an emulator on Travis-CI: <a href="https://gist.github.com/harmittaa/7d3c51041ffd0e54cda9807e95593309" class="bare">https://gist.github.com/harmittaa/7d3c51041ffd0e54cda9807e95593309</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_acceptance_testing">9. Acceptance Testing</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>This tutorial shows how you can write acceptance test using the <a href="https://github.com/cucumber/cucumber-jvm">Cucumber tool</a> in a Behaviour-Driven Development approach.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Clone the initial Android project from <a href="https://github.com/McGill-ECSE429-Fall2018/ecse429-tutorial-9">here</a> and import it to Android Studio</p>
</li>
<li>
<p>Install the <a href="https://plugins.jetbrains.com/plugin/7211-gherkin">Gherkin</a> plugin for Android Studio<br>
Click on <em>File</em> &gt; <em>Settings</em> &gt; <em>Plugins</em> &gt; <em>Browse Repositories</em><br>
<span class="image"><img src="./figs/fig-01-tutorial-10.png" alt="Browse Repositories"></span><br></p>
</li>
<li>
<p>Type <em>Gherkin</em> in search box, install it and restard Android Studio.<br>
<span class="image"><img src="./figs/fig-02-tutorial-10.png" alt="Gherkin plugin"></span><br></p>
</li>
<li>
<p>Under <code>androidTest</code> folder, create a new folder structure <code>androidTest/assets/features</code><br>
<span class="image"><img src="./figs/fig-03-tutorial-10.png" alt="assets folder"></span><br></p>
</li>
<li>
<p>Add a new file called <code>addParticipant.feature</code> in the features folder</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gherkin hljs" data-lang="gherkin">Feature: Add a participant
  Add a test participant to the main activity

  Scenario Outline: Add new participant to the main activity
    Given I have a MainActivity
    When I input username &lt;username&gt; in text field 'Who?'
    And I press 'Add Participant' button
    When I click on the 'Refresh Participant List' button
    Then I should see &lt;see&gt; in the list

    Examples:
      | username          | see               |
      | some_random_guy_1 | some_random_guy_1 |
      | some_random_guy_2 | some_random_guy_2 |
      | some_random_guy_3 | some_random_guy_3 |</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following lines  to the app&#8217;s <code>build.gradle</code> file within the <code>android</code> tags</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">android {
    // ...
    defaultConfig {
        // ...
        testInstrumentationRunner "ca.mcgill.ecse321.eventregistration.test.Instrumentation"
        // ...
    }
    // ...

    sourceSets {
        androidTest {
            assets {
                assets.srcDirs = ['src/androidTest/assets']
            }
            java {
                java.srcDirs = ['src/androidTest/java']
            }
        }
    }
    // ...

    compileOptions {
        // ...
        sourceCompatibility = '1.8'
        targetCompatibility = '1.8'
        // ...
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following lines in <code>dependencies</code> section</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">dependencies {
    // ...

    //Runner
    androidTestImplementation( 'com.android.support.test:runner:0.4.1' ){
        exclude module: 'junit'
    }
    androidTestImplementation 'io.cucumber:cucumber-junit:3.0.2'
    androidTestImplementation group: 'io.cucumber', name: 'cucumber-android', version: '3.0.2'
    androidTestImplementation 'io.cucumber:cucumber-picocontainer:3.0.2'
    androidTestImplementation group: 'io.cucumber', name: 'cucumber-jvm', version: '3.0.2', ext: 'pom'
    androidTestImplementation 'io.cucumber:cucumber-core:3.0.2'
    androidTestImplementation 'io.cucumber:cucumber-jvm-deps:1.0.6'
    // ...
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For convenience, below is the full specification of the <code>app.gradle</code> file
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">apply plugin: 'com.android.application'

android {
    compileSdkVersion 28
    defaultConfig {
        applicationId "ca.mcgill.ecse321.eventregistration"
        minSdkVersion 18
        targetSdkVersion 28
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner "ca.mcgill.ecse321.eventregistration.test.Instrumentation"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
    useLibrary 'android.test.runner'
    useLibrary 'android.test.base'
    useLibrary 'android.test.mock'

    sourceSets {
        androidTest {
            assets {
                assets.srcDirs = ['src/androidTest/assets']
            }
            java {
                java.srcDirs = ['src/androidTest/java']
            }
        }
    }
    compileOptions {
        sourceCompatibility = '1.8'
        targetCompatibility = '1.8'
    }
}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation 'com.android.support:appcompat-v7:28.0.0'
    implementation 'com.android.support.constraint:constraint-layout:1.1.3'
    implementation 'com.android.support:design:28.0.0'
    testImplementation 'junit:junit:4.12'

    implementation 'com.loopj.android:android-async-http:1.4.9'

    implementation 'com.jayway.android.robotium:robotium-solo:5.2.1'

    //Runner
    androidTestImplementation( 'com.android.support.test:runner:0.4.1' ){
        exclude module: 'junit'
    }

    androidTestImplementation 'io.cucumber:cucumber-junit:3.0.2'
    androidTestImplementation group: 'io.cucumber', name: 'cucumber-android', version: '3.0.2'
    androidTestImplementation 'io.cucumber:cucumber-picocontainer:3.0.2'
    androidTestImplementation group: 'io.cucumber', name: 'cucumber-jvm', version: '3.0.2', ext: 'pom'
    androidTestImplementation 'io.cucumber:cucumber-core:3.0.2'
    androidTestImplementation 'io.cucumber:cucumber-jvm-deps:1.0.6'
}</code></pre>
</div>
</div>
</li>
<li>
<p>Sync after making the changes to the <code>app.gradle</code> file</p>
</li>
<li>
<p>Delete the current implementation of <code>RobotiumTest</code> in the <code>java</code> folder</p>
</li>
<li>
<p>Refactor or create a new package named <code>ca.mcgill.ecse321.eventregistration.test</code> under <code>androidTest/java</code></p>
</li>
<li>
<p>Create a new class named <code>Instrumentation</code> in the <code>ca.mcgill.ecse321.eventregistration.test</code> package with the following code</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.test;

import android.os.Bundle;

import cucumber.api.android.CucumberInstrumentationCore;
import android.support.test.runner.AndroidJUnitRunner;

public class Instrumentation extends AndroidJUnitRunner {
    private final CucumberInstrumentationCore instrumentationCore = new CucumberInstrumentationCore(this);

    @Override
    public void onCreate(Bundle arguments) {
        super.onCreate(arguments);
        instrumentationCore.create(arguments);
    }

    @Override
    public void onStart() {
        waitForIdleSync();
        instrumentationCore.start();
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Create a new class named <code>CucumberRunner</code> in the <code>ca.mcgill.ecse321.eventregistration.test</code> package with the following code</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.test;

import cucumber.api.CucumberOptions;

@CucumberOptions(features = "features",
        glue = {"ca.mcgill.ecse321.eventregistration.test"},
        monochrome = true,
        plugin = { "pretty"}
)
public class CucumberRunner {
}</code></pre>
</div>
</div>
</li>
<li>
<p>Create a new class <code>CucumberSteps</code> again in the <code>`ca.mcgill.ecse321.eventregistration.test</code>. Your file structure should look like<br>
<span class="image"><img src="./figs/fig-04-tutorial-10.png" alt="complete folder structure"></span></p>
</li>
<li>
<p>Add initializing code to <code>CucumberSteps</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package ca.mcgill.ecse321.eventregistration.test;

import android.test.ActivityInstrumentationTestCase2;

import com.robotium.solo.Solo;

import ca.mcgill.ecse321.eventregistration.MainActivity;

public class CucumberSteps extends ActivityInstrumentationTestCase2&lt;MainActivity&gt; {
    private Solo solo;

    private static final String LAUNCHER_ACTIVITY_FULL_CLASSNAME = "ca.mcgill.ecse321.eventregistration.MainActivity";
    private static Class&lt;?&gt; launcherActivityClass;

    static {
        try {
            launcherActivityClass = Class.forName(LAUNCHER_ACTIVITY_FULL_CLASSNAME);
        } catch (ClassNotFoundException e) {
            throw new RuntimeException(e);
        }
    }

    public CucumberSteps() throws ClassNotFoundException {
        super((Class&lt;MainActivity&gt;) launcherActivityClass);
    }

    @Override
    public void setUp() throws Exception {
        super.setUp();
    }

    @Override
    public void tearDown() throws Exception {
        solo.finishOpenedActivities();
        getActivity().finish();
        super.tearDown();
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run the tests under <code>CucumberSteps</code>. Take a look at the logs for the test failures<br>
<span class="image"><img src="./figs/fig-05-tutorial-10.png" alt="cucumber error message"></span></p>
</li>
<li>
<p>Add the following code to <code>CucumberSteps</code> to finish writing the tests</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// ================================== Test Implementation =======================================================
@Given("I have a MainActivity")
public void i_have_a_MainActivity() throws Exception {
    solo = new Solo(getInstrumentation());
    getActivity();
}

@When("I input username some_random_guy_{int} in text field {string}")
public void i_input_username_some_random_guy__in_text_field(Integer int1, String string) {
    solo.waitForActivity("MainActivity", 2000);

    String username = "some_random_guy" + int1;

    EditText editText = solo.getEditText(string);
    solo.enterText(editText, username);
}

@When("I press {string} button")
public void i_press_button(String buttonName) {
    solo.waitForActivity("MainActivity", 2000);

    //click on button
    solo.clickOnText(buttonName);

    //make sure no error has been made
    boolean errorTextFound = solo.waitForText("exception", 1, 5000);
    assertFalse(errorTextFound);
}

@When("I click on the {string} button")
public void i_click_on_the_button(String buttonName) {
    solo.waitForActivity("MainActivity", 2000);

    //click on button
    solo.clickOnText(buttonName);
}

@Then("I should see some_random_guy_{int} in the list")
public void i_should_see_some_random_guy__in_the_list(Integer int1) {
    solo.waitForActivity("MainActivity", 2000);

    String expectedAddedParticipant = "some_random_guy" + int1;

    boolean textFound = solo.waitForText(expectedAddedParticipant, 1, 5000, true);
    assertTrue(textFound);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, rerun the tests under <code>CucumberSteps</code><br>
<span class="image"><img src="./figs/fig-06-tutorial-10.png" alt="cucumber tests passed"></span></p>
</li>
<li>
<p>Under the <em>Logcat</em> tab you can filter the view to see the output of Cucumber<br>
<span class="image"><img src="./figs/logcat-filter.png" alt="Logcat output"></span></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_model_based_testing">10. Model-based Testing</h2>
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="sect2">
<h3 id="_graphwalker">10.1. GraphWalker</h3>
<div class="paragraph">
<p>For reference, the main documentation for GraphWalker is accessible at <a href="http://graphwalker.github.io/" class="bare">http://graphwalker.github.io/</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_setting_up_graphwalker">10.2. Setting up GraphWalker</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download the Latest stable standalone CLI (3.4.2) jar file from <a href="http://graphwalker.github.io/download/">here</a>.</p>
</li>
<li>
<p>We assume that the <code>GRAPHWALKER</code> environment variable points to the jarfile (e.g., it points to <code>/home/user/graphwalker-cli-3.4.2.jar</code>). See its help by running</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">java -jar $GRAPHWALKER --help</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_test_model">10.3. Creating a test model</h3>
<div class="paragraph">
<p>We are going to create a test model using the online UMPLE tool.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="https://cruise.eecs.uottawa.ca/umpleonline/" class="bare">https://cruise.eecs.uottawa.ca/umpleonline/</a></p>
</li>
<li>
<p>Insert the following example state machine code describing the possible states of a shuttler and insert it into the text editor (example taken from <a href="http://cruise.eecs.uottawa.ca/umple/StateMachineRegions.html">here</a>)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">class TrackShuttler {
  sm {
    initializing {
      readyToGo -&gt; transferringLoad;
    }
    transferringLoad {
      loaded -&gt; shuttling;
    }
    shuttling {
      reachEnd -&gt; transferringLoad;
      moving {
        nearEnd -&gt; braking;
        accelerating {
          reachedMaxSpeed -&gt; coasting;
        }
        coasting {
          tooSlow -&gt; accelerating;
        }
        braking {
          tooSlow -&gt; coasting;
        }
      }
      ||
      controllingLights {
        lightsOn {
          daylightDetected -&gt; lightsOff;
        }
        lightsOff {
          darknessDetected -&gt; lightsOn;
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="./figs/shuttler-sm.png" alt="Hierarchical statechart"></span></p>
</div>
</li>
<li>
<p>Take a look what code is generated by the tool based on the statechart!</p>
</li>
<li>
<p>Using the <a href="https://www.yworks.com/yed/">yEd tool</a>, create the flattened version of the state machine<br>
<span class="image"><img src="./figs/shuttler-graph.png" alt="Flat automaton"></span><br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can download the resulting graphml <a href="figs/shuttler.graphml">from here</a>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_test_generation">10.4. Test generation</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the GraphWalker tool to generate a test sequence based on your criteria. For example, to generate <em>full vertex coverage</em> by applying a <em>random walk</em> strategy, use</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar $GRAPHWALKER offline --model shuttler.graphml "random(vertex_coverage(100))" --start-element v_Initializing</code></pre>
</div>
</div>
<div class="paragraph">
<p>Output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">{"currentElementName":"v_Initializing"}
{"currentElementName":"e_readyToGo"}
{"currentElementName":"v_TransferingLoad"}
{"currentElementName":"e_loaded"}
{"currentElementName":"v_lightsOn_accelerating"}
{"currentElementName":"e_daylightDetected"}
{"currentElementName":"v_lightsOff_accelerating"}
{"currentElementName":"e_reachEnd"}
{"currentElementName":"v_TransferingLoad"}
{"currentElementName":"e_loaded"}
{"currentElementName":"v_lightsOn_accelerating"}
{"currentElementName":"e_nearEnd"}
{"currentElementName":"v_lightsOn_braking"}
{"currentElementName":"e_daylightDetected"}
{"currentElementName":"v_lightsOff_braking"}
{"currentElementName":"e_tooSlow"}
{"currentElementName":"v_lightsOff_coasting"}
{"currentElementName":"e_tooSlow"}
{"currentElementName":"v_lightsOff_accelerating"}
{"currentElementName":"e_reachEnd"}
{"currentElementName":"v_TransferingLoad"}
{"currentElementName":"e_loaded"}
{"currentElementName":"v_lightsOn_accelerating"}
{"currentElementName":"e_daylightDetected"}
{"currentElementName":"v_lightsOff_accelerating"}
{"currentElementName":"e_darknessDetected"}
{"currentElementName":"v_lightsOn_accelerating"}
{"currentElementName":"e_reachedMaxSpeed"}
{"currentElementName":"v_lightsOn_coasting"}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Use the <a href="https://stedolan.github.io/jq/">jq tool</a> to prettify the output of the test generator. Pipe the results:<br>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs" data-lang="none">GRAPHWALKER_COMMAND | jq -r .currentElementName</code></pre>
</div>
</div>
</li>
<li>
<p>Experiment with other setting, such as creating a test case from one node to another node with A* traversal! See more <a href="http://graphwalker.github.io/generators_and_stop_conditions/">here</a>.</p>
</li>
<li>
<p><a href="http://graphwalker.github.io/MBT_How_to/">Other useful MBT resources</a></p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-02-18 16:44:24 UTC
</div>
</div>
<link rel="stylesheet" href="./highlight.js/styles/foundation.min.css">
<script src="./highlight.js/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>